@model TicketAddEditViewModel

@{
    ViewData["Title"] = "Tạo lệnh sản xuất";
}

@Html.Partial("Breadcrumb")
@Html.Partial("PageHeader")

<form id="create-ticket-form" class="form-horizontal">
    <div>
        @*<div asp-validation-summary="All" class="text-danger"></div>*@
        <input asp-for="Model.Id" hidden />
        <div class="form-group">
            <label asp-for="Model.Name" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input asp-for="Model.Name" required maxlength="255" class="form-control" />
                <span asp-validation-for="Model.Name" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="Model.ClientId" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                @Html.DropDownListFor(vm => vm.Model.ClientId, Model.Clients, "Chọn khách hàng...", new { @class = "form-control", @required = "required" })
                <span asp-validation-for="Model.ClientId" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="Model.SaleById" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                @Html.DropDownListFor(vm => vm.Model.SaleById, Model.Sales, "Chọn nhân viên kinh doanh...", new { @class = "form-control", @required = "required" })
                <span asp-validation-for="Model.SaleById" class="text-danger"></span>
            </div>
        </div>

        <div class="form-group">
            <label asp-for="Model.StatusId" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                @Html.DropDownListFor(vm => vm.Model.StatusId, Model.Statuses, null, new { @class = "form-control", @required= "required" })
                <span asp-validation-for="Model.StatusId" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="Model.PersonInChargeId" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                @Html.DropDownListFor(vm => vm.Model.PersonInChargeId, Model.PersonInCharges, "Chọn người thực hiện...", new { @class = "form-control" })
                <span asp-validation-for="Model.PersonInChargeId" class="text-danger"></span>
            </div>
        </div>
        <hr />
        <div class="form-group">
            <label asp-for="Model.Quantity" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input type="number" asp-for="Model.Quantity" required min="1" max="999999" class="form-control">
                <span asp-validation-for="Model.Quantity" class="text-danger"></span>
            </div>
        </div>
        <div class="form-group">
            <label asp-for="Model.Deadline" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <input data-provide="datepicker" required maxlength="255" class="form-control datepicker" type="datetime"
                       data-val="true"
                       id="Model_Deadline" name="Model.Deadline"
                       value="@string.Format("{0:d}", TimeZoneInfo.ConvertTime(Model.Model.Deadline, TimeZoneInfo.Local))">
                <span asp-validation-for="Model.Deadline" class="text-danger"></span>
            </div>
        </div>

        <hr />
        @Html.Partial("InventoryOperationTable", Model)

        <hr />
        @Html.Partial("EffortOperationTable", Model)

        <hr />
        <div class="form-group">
            <label asp-for="Model.Note" class="col-md-2 control-label"></label>
            <div class="col-md-10">
                <textarea asp-for="Model.Note" maxlength="1000" class="form-control"></textarea>
                <span asp-validation-for="Model.Note" class="text-danger"></span>
            </div>
        </div>
    </div>
    <br />
    <div>
        <a class="btn btn-primary js-ticket-create" href="javascript:void(0);">
            <i class="glyphicon glyphicon-floppy-disk"></i>
            Lưu
        </a>
        <a class="btn btn-default" href="/Ticket/">
            <i class="glyphicon glyphicon-remove"></i>
            Hủy
        </a>
    </div>
    <br />
    <br />
</form>

@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
}
