@model IPagedList<MaterialModel>
@{
    ViewData["Title"] = "Danh sách vật tư";
    var linkTo = "/Material";
}

<h2>@ViewData["Title"].</h2>
<div>
    <button type="button" class="btn btn-default create-new--btn js-open-modal"
            data-toggle="modal" data-target="#material-modal" data-form-type="add"
            data-modal-content-url="@linkTo/Edit/0">
        <i class="glyphicon glyphicon glyphicon-plus"></i>
        Tạo mới
    </button>
</div>

@Html.Partial("SmartPager", Model, new ViewDataDictionary(ViewData)
{
    { "sr-to", linkTo }
})

@Html.Partial("TableSearchBox", new ViewDataDictionary(ViewData)
{
    { "asp-controller", "Material" }
})

<table class="table table-striped table-hover allow-edit allow-delete material-detail">
    <tbody>
        @if (Model != null && Model.Any())
        {
            var dummyDetail = Model.FirstOrDefault();

            <tr>
                <th>@Html.RenderTableHeaderAnchor(linkTo, "Id", Html.DisplayNameFor(m => dummyDetail.Id))</th>
                <th>@Html.RenderTableHeaderAnchor(linkTo, "Name", Html.DisplayNameFor(m => dummyDetail.Name))</th>
                <th>@Html.RenderTableHeaderAnchor(linkTo, "Code", Html.DisplayNameFor(m => dummyDetail.Code))</th>
                <th>@Html.RenderTableHeaderAnchor(linkTo, "Description", Html.DisplayNameFor(m => dummyDetail.Description))</th>
                <th>@Html.RenderTableHeaderAnchor(linkTo, "Unit", Html.DisplayNameFor(m => dummyDetail.Unit))</th>
                <th>@Html.RenderTableHeaderAnchor(linkTo, "UnitPrice", Html.DisplayNameFor(m => dummyDetail.UnitPrice))</th>
                <th>@Html.RenderTableHeaderAnchor(linkTo, "Active", Html.DisplayNameFor(m => dummyDetail.Active))</th>
                <th></th>
            </tr>

            @for (var index = 0; index < Model.Count; index++)
            {
                <tr>
                    <td>
                        <a class="hover-view js-open-modal" title="Sửa"
                           data-toggle="modal" data-target="#material-modal" data-form-type="edit"
                           data-modal-content-url="@linkTo/Edit/@Model[index].Id">
                            <i class="glyphicon glyphicon-pencil"></i>
                        </a>
                        <span class="normal-view">@Model[index].Id</span>
                    </td>
                    <td>@Model[index].Name</td>
                    <td>@Model[index].Code</td>
                    <td>@Model[index].Description</td>
                    <td>@Model[index].Unit</td>
                    <td>@Model[index].UnitPrice</td>
                    <td>@Html.CheckBoxFor(m => Model[index].Active, new { onclick = "return false" })</td>

                    <td>
                        <a class="hover-view js-open-modal" title="Xóa"
                           data-toggle="modal" data-target="#material-modal" data-form-type="delete"
                           data-modal-content-url="@linkTo/ConfirmDelete/@Model[index].Id">
                            <i class="glyphicon glyphicon-remove"></i>
                        </a>
                    </td>
                </tr>
            }
                        }
    </tbody>
</table>

<div class="modal fade" id="material-modal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
        </div>
    </div>
</div>

@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
}
